<head>
<title>2020 Senate Forecast</title>
    <meta name="viewport" content="initial-scale=1.0">

<script src="jquery.js"></script>
  <script src="raphael.js"></script>
  <script src="jquery.usmap.js"></script>
<body>


    <div id="container">
        <div id="topline">
        
        <h1 style="text-align: left">Senate Forecast</h1>

        <div class="dem">
            <span style="color:#292929;font-size: 10pt;text-align:left;">Dem. Outright Majority:</span>
            <br>
    <span id="toplineD">62% chance</span>
        </div>
        <div class="gop">
        <span style="color:#292929;font-size: 10pt;text-align:left;">GOP Outright Majority:</span>
                <br>
    <span id="toplineR">28% chance</span>
            </div>
    <div id="bar">
        <div id="demProb"></div>
                <div id="tieProb"></div>
                <div id="repProb"></div>

        </div>

    <div class="dem">
        <span>52 seats</span>
        <br>
        <span style="color:#292929;font-size: 10pt;text-align:left;">Average Seats</span>

        </div>
                        <div class="gop">
        <span>48 seats</span>
                            <br>
                                    <span style="color:#292929;font-size: 10pt;text-align:left;">Average Seats</span>

        </div>
<br>

        </div>
        <div id="info-container">
        
            <div id="infobox" style="display: none">
        <span id="state">Mouse over states to see forecast</span>
    <div id="info" >
            <span style="color:#292929;font-size: 10pt;text-align:left;">Chance of winning:</span>
        <br>

          <div class="dem">
        <span id="probD"></span>
        </div>
                        <div class="gop">
        <span id="probR"></span>
        </div>
    </div>

    <div id="bar2">
                       <div id="notupD" class="meter"></div>
        <div id="notupR" class="meter"></div>

        </div>
        <span style="color:#292929;font-size: 10pt;text-align:left;" id="dCand"></span>
        <span style="color:#292929;font-size: 10pt;text-align:right;float:right" id="rCand"></span>
                <div style="text-align: center">
                                <span style="color:#292929;font-size: 10pt;text-align:left;">Est. Vote Margin:</span>
<br>
                    <span id="margin"></span></div>
                <hr>
        <table id="rater">
<tr>
<th>Held by</th>
    <th>Rating</th>
            </tr>  
            <tr>
            <td id="current">D</td>
            <td id="rating">Safe D</td>
            </tr>

                </table>
            </div>  
        
        </div>
<div id="map-display">
                        <div id="map" style="width: 50%; height: 100%;" onmouseout="hideInfo()"></div>
      
        <div id="GA" onmouseover="Georgia(7)" onmouseout="hideInfo()" style="margin:0;text-align:center;"><span>GA</span></div>
        
        </div>

        
        
        <div id="lower">
            
                  <h3 style="text-align: left">Key</h3>
        <table id ="key">
  <tr>
    <th>>50%</th>
    <th>>60%</th>
    <th>>70%</th>
    <th>>80%</th>
    <th>>90%</th>
  </tr>   
  <tr>
    <td style="border:2px solid;background-color: #deeafd"></td>
    <td style="background-color: #bcd5fb"></td>
    <td style="background-color: #97c1f9"></td>
<td style="background-color: #6badf6"></td>
<td style="background-color: #1e9af3"></td>
  </tr>
  <tr>
    <td style="border:2px solid;background-color: #ffdfd6"></td>
    <td style="background-color: #ffbeae"></td>
    <td style="background-color: #ff9a85"></td>
<td style="background-color: #ff715b"></td>
      <td style="background-color: #ff352c"></td>
  </tr> 
</table>
            <h2>Likely Senate Composition</h2>
            <div id="states-container" style="text-align:center;">
                <div class="dem">
<span style="font-size: 12pt">35 Dem Seats Not Up</span>
                </div>
                                <div class="gop">
<span style="font-size: 12pt">30 GOP Seats Not Up</span>
                </div>

<span>EVEN</span>
                <br>
        <div style="width:103%;">
            <div id="notupD" style="width:35%;background-color: #2e9af3;height:30px;"></div>
                <div id="up"></div>
                <div id="notupR" style="width:30%;background-color: #ff352c;height:30px;float:left;         outline: 1px solid white;"></div>
                </div>
            </div>
            <br>
            <br>
      
                        <h2>About</h2>
<p>This Senate forecast combines polling and fundamentals such as fundraising to predict the vote share. It then simulates 10,000 possible different outcomes.</p>
            
            <h2>Notes</h2>
<p>[1] As the Vice President breaks Senate ties, actual Senate control depends greatly on the outcome of the Presidential election. The win probabilities above are calculated from the chance either party wins 51 seats or more.</p>
<p>[2] Dr. Al Gross of Alaska is an independent who will appear on the ballot as a Democrat and intends to caucus with the Democrats. He is counted as a Democrat for the purpose of this model.</p>

<h2>Possible Outcomes</h2>

              <table id ="dist">
  <tr>
    <th>D</th>
    <th>R</th>
    <th>Prob</th>
    <th style="width:500px;"></th>
  </tr>       

</table>
            
            </div>
    </div>
</body>
<script>

    var displayProbDem =62.48;
        var displayProbTie =8.92;
        var displayProbGOP = 100 - (displayProbDem+displayProbTie);
      var index = 0;
    var dist = [
  {
    "DEM": 43,
    "Prob %": 0.0065
  },
  {
    "DEM": 44,
    "Prob %": 0.0145
  },
  {
    "DEM": 45,
    "Prob %": 0.0241
  },
  {
    "DEM": 46,
    "Prob %": 0.0349
  },
  {
    "DEM": 47,
    "Prob %": 0.0484
  },
  {
    "DEM": 48,
    "Prob %": 0.0668
  },
  {
    "DEM": 49,
    "Prob %": 0.0841
  },
  {
    "DEM": 50,
    "Prob %": 0.0892
  },
  {
    "DEM": 51,
    "Prob %": 0.1036
  },
  {
    "DEM": 52,
    "Prob %": 0.1016
  },
  {
    "DEM": 53,
    "Prob %": 0.0998
  },
  {
    "DEM": 54,
    "Prob %": 0.0804
  },
  {
    "DEM": 55,
    "Prob %": 0.0661
  },
  {
    "DEM": 56,
    "Prob %": 0.0521
  },
  {
    "DEM": 57,
    "Prob %": 0.0417
  },
  {
    "DEM": 58,
    "Prob %": 0.0294
  },
  {
    "DEM": 59,
    "Prob %": 0.0207
  },
  {
    "DEM": 60,
    "Prob %": 0.0127
  },
  {
    "DEM": 61,
    "Prob %": 0.0087
  },
  {
    "DEM": 62,
    "Prob %": 0.0047
  }
];
    var states =[
  {
    "State": "AL",
    "DEM": 44.85,
    "GOP": 52.15,
    "DemProb": 0.2493,
    "RepProb": 0.7507,
    "StateName": "Alabama",
    "DemCand": "Jones",
    "RepCand": "Tuberville",
    "Incumbent": "D",
    "Pop": "4,903,185",
    "": 1222364.021
  },
  {
    "State": "AK",
    "DEM": 44.19,
    "GOP": 52.81,
    "DemProb": 0.1457,
    "RepProb": 0.8543,
    "StateName": "Alaska",
    "DemCand": "Gross",
    "RepCand": "Sullivan",
    "Incumbent": "R",
    "Pop": "731,545",
    "": 106586.1065
  },
  {
    "State": "AZ",
    "DEM": 52.91,
    "GOP": 44.09,
    "DemProb": 0.8434,
    "RepProb": 0.1566,
    "StateName": "Arizona",
    "DemCand": "Kelly",
    "RepCand": "McSally",
    "Incumbent": "R",
    "Pop": "7,278,717",
    "": 6138869.918
  },
  {
    "State": "AR",
    "DEM": 20.87,
    "GOP": 76.13,
    "DemProb": 0,
    "RepProb": 1,
    "StateName": "Arkansas",
    "DemCand": "Harrington",
    "RepCand": "Cotton",
    "Incumbent": "R",
    "Pop": "3,017,804",
    "": 0
  },
  {
    "State": "CO",
    "DEM": 52.58,
    "GOP": 44.42,
    "DemProb": 0.813,
    "RepProb": 0.187,
    "StateName": "Colorado",
    "DemCand": "Hickenlooper",
    "RepCand": "Gardner",
    "Incumbent": "R",
    "Pop": "5,758,736",
    "": 4681852.368
  },
  {
    "State": "DE",
    "DEM": 61.01,
    "GOP": 35.99,
    "DemProb": 0.99,
    "RepProb": 0.01,
    "StateName": "Delaware",
    "DemCand": "Coons",
    "RepCand": "Rep",
    "Incumbent": "D",
    "Pop": "973,764",
    "": 964026.36
  },
  {
    "State": "GA",
    "DEM": 45.93,
    "GOP": 51.07,
    "DemProb": 0.3148,
    "RepProb": 0.6852,
    "StateName": "Georgia",
    "DemCand": "Ossoff",
    "RepCand": "Perdue",
    "Incumbent": "R",
    "Pop": "5,308,712",
    "": 1671182.38
  },
  {
    "State": "GA2",
    "DEM": 46.08,
    "GOP": 50.92,
    "DemProb": 0.3078,
    "RepProb": 0.6922,
    "StateName": "Georgia Special",
    "DemCand": "Dem",
    "RepCand": "Rep",
    "Incumbent": "R",
    "Pop": "5,308,712",
    "": 1634021.4
  },
  {
    "State": "ID",
    "DEM": 39.08,
    "GOP": 60.92,
    "DemProb": 0.0187,
    "RepProb": 0.9813,
    "StateName": "Idaho",
    "DemCand": "Jordan",
    "RepCand": "Risch",
    "Incumbent": "R",
    "Pop": "1,787,065",
    "": 33418.1155
  },
  {
    "State": "IL",
    "DEM": 61.75,
    "GOP": 38.25,
    "DemProb": 0.9873,
    "RepProb": 0.0127,
    "StateName": "Illinois",
    "DemCand": "Durbin",
    "RepCand": "Curran",
    "Incumbent": "D",
    "Pop": "12,671,821",
    "": 12510888.87
  },
  {
    "State": "IA",
    "DEM": 48.76,
    "GOP": 48.24,
    "DemProb": 0.5176,
    "RepProb": 0.4824,
    "StateName": "Iowa",
    "DemCand": "Greenfield",
    "RepCand": "Ernst",
    "Incumbent": "R",
    "Pop": "3,155,070",
    "": 1633064.232
  },
  {
    "State": "KS",
    "DEM": 46.42,
    "GOP": 50.58,
    "DemProb": 0.3893,
    "RepProb": 0.6107,
    "StateName": "Kansas",
    "DemCand": "Dem",
    "RepCand": "Rep",
    "Incumbent": "R",
    "Pop": "2,913,314",
    "": 1134153.14
  },
  {
    "State": "KY",
    "DEM": 44,
    "GOP": 53,
    "DemProb": 0.183,
    "RepProb": 0.817,
    "StateName": "Kentucky",
    "DemCand": "McGrath",
    "RepCand": "McConnell",
    "Incumbent": "R",
    "Pop": "4,467,673",
    "": 817584.159
  },
  {
    "State": "LA",
    "DEM": 36.49,
    "GOP": 63.51,
    "DemProb": 0.0042,
    "RepProb": 0.9958,
    "StateName": "Louisana",
    "DemCand": "TBD",
    "RepCand": "Cassidy",
    "Incumbent": "R",
    "Pop": "4,648,794",
    "": 19524.9348
  },
  {
    "State": "ME",
    "DEM": 51.45,
    "GOP": 45.55,
    "DemProb": 0.7311,
    "RepProb": 0.2689,
    "StateName": "Maine",
    "DemCand": "Gideon",
    "RepCand": "Collins",
    "Incumbent": "R",
    "Pop": "1,344,212",
    "": 982753.3932
  },
  {
    "State": "MA",
    "DEM": 63.7,
    "GOP": 36.3,
    "DemProb": 0.995,
    "RepProb": 0.005,
    "StateName": "Massachusetts",
    "DemCand": "Dem",
    "RepCand": "Rep",
    "Incumbent": "D",
    "Pop": "6,892,503",
    "": 6858040.485
  },
  {
    "State": "MI",
    "DEM": 53.54,
    "GOP": 43.46,
    "DemProb": 0.8368,
    "RepProb": 0.1632,
    "StateName": "Michigan",
    "DemCand": "Peters",
    "RepCand": "James",
    "Incumbent": "D",
    "Pop": "6,892,503",
    "": 5767646.51
  },
  {
    "State": "MN",
    "DEM": 55.68,
    "GOP": 44.32,
    "DemProb": 0.8528,
    "RepProb": 0.1472,
    "StateName": "Minnesota",
    "DemCand": "Smith",
    "RepCand": "Rep",
    "Incumbent": "D",
    "Pop": "5,639,632",
    "": 4809478.17
  },
  {
    "State": "MS",
    "DEM": 36.99,
    "GOP": 60.01,
    "DemProb": 0.0936,
    "RepProb": 0.9064,
    "StateName": "Mississippi",
    "DemCand": "Espy",
    "RepCand": "Hyde-Smith",
    "Incumbent": "R",
    "Pop": "2,976,149",
    "": 278567.5464
  },
  {
    "State": "MT",
    "DEM": 47.17,
    "GOP": 49.83,
    "DemProb": 0.374,
    "RepProb": 0.626,
    "StateName": "Montana",
    "DemCand": "Bullock",
    "RepCand": "Daines",
    "Incumbent": "R",
    "Pop": "1,068,778",
    "": 399722.972
  },
  {
    "State": "NE",
    "DEM": 37.61,
    "GOP": 62.39,
    "DemProb": 0.0094,
    "RepProb": 0.9906,
    "StateName": "Nebraska",
    "DemCand": "Janicek",
    "RepCand": "Sasse",
    "Incumbent": "R",
    "Pop": "1,934,408",
    "": 18183.4352
  },
  {
    "State": "NH",
    "DEM": 56.58,
    "GOP": 40.42,
    "DemProb": 0.9416,
    "RepProb": 0.0584,
    "StateName": "New Hampshire",
    "DemCand": "Shaheen",
    "RepCand": "Rep",
    "Incumbent": "D",
    "Pop": "1,359,711",
    "": 1280303.878
  },
  {
    "State": "NJ",
    "DEM": 60.13,
    "GOP": 36.87,
    "DemProb": 0.9956,
    "RepProb": 0.0044,
    "StateName": "New Jersey",
    "DemCand": "Booker",
    "RepCand": "Rep",
    "Incumbent": "D",
    "Pop": "8,882,190",
    "": 8843108.364
  },
  {
    "State": "NM",
    "DEM": 57.36,
    "GOP": 42.64,
    "DemProb": 0.9483,
    "RepProb": 0.0517,
    "StateName": "New Mexico",
    "DemCand": "Ray Lujan",
    "RepCand": "Ronchetti",
    "Incumbent": "D",
    "Pop": "2,096,829",
    "": 1988422.941
  },
  {
    "State": "NC",
    "DEM": 51.53,
    "GOP": 45.47,
    "DemProb": 0.769,
    "RepProb": 0.231,
    "StateName": "North Carolina",
    "DemCand": "Cunningham",
    "RepCand": "Tillis",
    "Incumbent": "R",
    "Pop": "10,488,084",
    "": 8065336.596
  },
  {
    "State": "OK",
    "DEM": 42.17,
    "GOP": 57.83,
    "DemProb": 0.0669,
    "RepProb": 0.9331,
    "StateName": "Oklaholma",
    "DemCand": "Broyles",
    "RepCand": "Inhofe",
    "Incumbent": "R",
    "Pop": "3,956,971",
    "": 264721.3599
  },
  {
    "State": "OR",
    "DEM": 63.24,
    "GOP": 36.76,
    "DemProb": 0.9942,
    "RepProb": 0.0058,
    "StateName": "Oregon",
    "DemCand": "Merkley",
    "RepCand": "Perkins",
    "Incumbent": "D",
    "Pop": "4,217,737",
    "": 4193274.125
  },
  {
    "State": "RI",
    "DEM": 64.52,
    "GOP": 35.48,
    "DemProb": 0.9968,
    "RepProb": 0.0032,
    "StateName": "Rhode Island",
    "DemCand": "Reed",
    "RepCand": "Waters",
    "Incumbent": "D",
    "Pop": "1,059,361",
    "": 1055971.045
  },
  {
    "State": "SC",
    "DEM": 44.39,
    "GOP": 52.61,
    "DemProb": 0.1679,
    "RepProb": 0.8321,
    "StateName": "South Carolina",
    "DemCand": "Harrison",
    "RepCand": "Graham",
    "Incumbent": "R",
    "Pop": "5,148,714",
    "": 864469.0806
  },
  {
    "State": "SD",
    "DEM": 37.99,
    "GOP": 62.01,
    "DemProb": 0.0095,
    "RepProb": 0.9905,
    "StateName": "South Dakota",
    "DemCand": "Ahlers",
    "RepCand": "Rounds",
    "Incumbent": "R",
    "Pop": "884,659",
    "": 8404.2605
  },
  {
    "State": "TN",
    "DEM": 43.31,
    "GOP": 56.69,
    "DemProb": 0.1033,
    "RepProb": 0.8967,
    "StateName": "Tennessee",
    "DemCand": "Dem",
    "RepCand": "Rep",
    "Incumbent": "R",
    "Pop": "6,829,174",
    "": 705453.6742
  },
  {
    "State": "TX",
    "DEM": 43.03,
    "GOP": 53.97,
    "DemProb": 0.1207,
    "RepProb": 0.8793,
    "StateName": "Texas",
    "DemCand": "Hegar",
    "RepCand": "Cornyn",
    "Incumbent": "R",
    "Pop": "28,995,881",
    "": 3499802.837
  },
  {
    "State": "VA",
    "DEM": 61.6,
    "GOP": 38.4,
    "DemProb": 0.9872,
    "RepProb": 0.0128,
    "StateName": "Virginia",
    "DemCand": "Warner",
    "RepCand": "Gade",
    "Incumbent": "D",
    "Pop": "8,535,519",
    "": 8426264.357
  },
  {
    "State": "WV",
    "DEM": 39.61,
    "GOP": 60.39,
    "DemProb": 0.0256,
    "RepProb": 0.9744,
    "StateName": "West Virginia",
    "DemCand": "Swearengin",
    "RepCand": "Moore Capito",
    "Incumbent": "R",
    "Pop": "1,792,147",
    "": 45878.9632
  },
  {
    "State": "WY",
    "DEM": 37.66,
    "GOP": 62.34,
    "DemProb": 0.011,
    "RepProb": 0.989,
    "StateName": "Wyoming",
    "DemCand": "Dem",
    "RepCand": "Rep",
    "Incumbent": "R",
    "Pop": "578,759",
    "": 6366.349
  }
];
var states2 = copy(states);

        
  function copy(x) { //copy the states to states2
    return JSON.parse( JSON.stringify(x) );
}
  
function stateSort(){ //sort the states by probability

          states2.sort(function (a, b) {
  return a.RepProb - b.RepProb;
});    
    }
    
    $(document).on('mousemove', function(e){
   $('#infobox').offset({left: e.pageX-100, top: e.pageY-250})
});



$(document).ready(function() {
    drawStates();
    document.getElementById("GA").style.background=color(states[7].DemProb);
    //update topline numbers
        document.getElementById("toplineD").innerHTML=Math.round(displayProbDem)+"%";
        document.getElementById("toplineR").innerHTML=Math.round(displayProbGOP)+"%";
        document.getElementById("demProb").style.width=displayProbDem+"%";
        document.getElementById("tieProb").style.width=displayProbTie+"%";
        document.getElementById("repProb").style.width=displayProbGOP+"%";

    for (x in dist) { 
        var fill;
        var letter;
        var letterR;
        var note;

        var width = dist[x]["Prob %"];
        if(dist[x].DEM>50){
         fill = "#2e9af3";  
            letter = "rgba(46, 154, 243, 0.5)"; 
            letterR = "none";  
            if (dist[x].DEM==47){
                note = "<- Current Composition";   
            }else{
            
            }
        }
          else if(dist[x].DEM<50){
         fill = "#ff352c"; 
                          letter = "none";
            letterR = "rgba(255, 53, 44,.5)";  
        }
        else if(dist[x].DEM==50){
         fill = "#525252"; 
            letter = "#cbcbcb"; 
                        letterR = "#cbcbcb"; 
        }
        
        var r = 100-dist[x].DEM;
                var s = 2500*dist[x]["Prob %"];

    document.getElementById("dist").innerHTML+="<tr><td style='background-color:"+letter+"'>"+dist[x].DEM+"</td><td style='background-color:"+letterR+"'>"+r+"</td><td>"+Math.round(dist[x]["Prob %"]*100)+"%</td><td><div id='distBar'style='width:"+s+"px;background-color:"+fill+"'></div></td></tr>";

    }
    

$('#map').usmap({
         mouseover: function(event, data) {
                 index = states.findIndex(st => st.State === data.name); //change the index to state being moused-over.
             console.log(states[index]);
                if(states[index]==undefined||states[index]==null){
                        document.getElementById("infobox").style.display("none");
             }else{
             }

Georgia(index);
      
                
  },       
          stateStyles: {fill: '#e8e8e8',stroke:"#fff",'stroke-width':0},
stateHoverAnimation: 0,
        showLabels: false,
         stateSpecificStyles: {
        'AL': {fill: color(states[0].DemProb)},
        'AK': {fill: color(states[1].DemProb)},
        'AZ': {fill: color(states[2].DemProb)},
        'AR': {fill: color(states[3].DemProb)},
        'CO': {fill: color(states[4].DemProb)},
        'DE': {fill: color(states[5].DemProb)},
        'GA': {fill: color(states[6].DemProb),stroke:tossup(states[6].DemProb),'stroke-width':tossupLine(states[6].DemProb)},
        'ID': {fill: color(states[8].DemProb)},
        'IL': {fill: color(states[9].DemProb)},
        'IA': {fill: color(states[10].DemProb),stroke:tossup(states[10].DemProb),'stroke-width':tossupLine(states[10].DemProb)},
        'KS': {fill: color(states[11].DemProb)},
        'KY': {fill: color(states[12].DemProb)},
        'LA': {fill: color(states[13].DemProb)},
        'ME': {fill: color(states[14].DemProb)},
        'MA': {fill: color(states[15].DemProb)},
        'MI': {fill: color(states[16].DemProb)},
        'MN': {fill: color(states[17].DemProb)},
        'MS': {fill: color(states[18].DemProb)},
        'MT': {fill: color(states[19].DemProb),stroke:tossup(states[19].DemProb),'stroke-width':tossupLine(states[19].DemProb)},
        'NE': {fill: color(states[20].DemProb)},
        'NH': {fill: color(states[21].DemProb)},
        'NJ': {fill: color(states[22].DemProb)},
        'NM': {fill: color(states[23].DemProb)},
        'NC': {fill: color(states[24].DemProb),stroke:tossup(states[24].DemProb),'stroke-width':tossupLine(states[24].DemProb)},
        'OK': {fill: color(states[25].DemProb)},
        'OR': {fill: color(states[26].DemProb)},
        'RI': {fill: color(states[27].DemProb)},
        'SC': {fill: color(states[28].DemProb)},
        'SD': {fill: color(states[20].DemProb)},
        'TN': {fill: color(states[30].DemProb)},
        'TX': {fill: color(states[31].DemProb)},
        'VA': {fill: color(states[32].DemProb)},
        'WV': {fill: color(states[33].DemProb)},
        'WY': {fill: color(states[34].DemProb)}
  },
    stateSpecificLabelBackingStyles: {
        'NH': {fill: color(states[21].DemProb)},
        'RI': {fill: color(states[27].DemProb)},
        'NJ': {fill: color(states[22].DemProb)},
        'MA': {fill: color(states[15].DemProb)},
        'DE': {fill: color(states[5].DemProb)},
},
        stateSpecificLabelBackingHoverStyles:{
                'NH': {fill: color(states[21].DemProb)},
        'RI': {fill: color(states[27].DemProb)},
        'NJ': {fill: color(states[22].DemProb)},
        'MA': {fill: color(states[15].DemProb)},
        'DE': {fill: color(states[5].DemProb)},
    },
labelRadius:0,
        labelBackingStyles:{fill:'#c9c8c8',stroke:0},
          stateHoverStyles: {'stroke-width': 3,stroke:'#292929'}

    });

  });
    


function hideInfo(){ //hide infobox
        document.getElementById("infobox").style.display="none";
}
    
function Georgia(d){ //pull up infobox
 
        document.getElementById("infobox").style.display="inline-block"; 
var prob = Math.round(states[d].DemProb*100);
    if(prob>99){
                document.getElementById("probD").innerHTML=">99%";
                document.getElementById("probR").innerHTML="<1%";
    }
    else if(prob<1){
                document.getElementById("probD").innerHTML="<1%";
                document.getElementById("probR").innerHTML=">99%";    
                 }
                 
        else{
                document.getElementById("probD").innerHTML= prob+"%";
                document.getElementById("probR").innerHTML= 100-prob+"%";
        }    
    if(d==1||d==3){ //Special styling for Alaska
            document.getElementById("probD").style.color= "#78bc1a";
            document.getElementById("notupD").style.backgroundColor= "#78bc1a";

    }else{
            document.getElementById("probD").style.color= "#2e9af3";
            document.getElementById("notupD").style.backgroundColor= "#2e9af3";     
}
            document.getElementById("notupD").style.width = prob+"%";
            document.getElementById("notupR").style.width = 100-prob+"%";
            document.getElementById("state").innerHTML= states[d].StateName;
            document.getElementById("dCand").innerHTML= states[d].DemCand;
            document.getElementById("rCand").innerHTML= states[d].RepCand;
            document.getElementById("current").innerHTML= states[d].Incumbent;
            document.getElementById("rating").innerHTML=rating(states[d].DemProb);
                document.getElementById("rating").style.backgroundColor=colorT(states[d].DemProb);
if(states[d].Incumbent=="D"){
document.getElementById("current").style.color="#1e9af3";   
}else{
    document.getElementById("current").style.color="#ff352c";   

}

        var margin = Math.round(states[d].DEM-states[d].GOP);
                if(margin>0){
                        document.getElementById("margin").innerHTML= states[d].DemCand+" +"+margin;
                        document.getElementById("margin").style.color= "#2e9af3";
                 }
                 if(margin==0){
                        document.getElementById("margin").innerHTML= "EVEN";
                        document.getElementById("margin").style.color= "#292929"; 
                 }
                  if(margin<0){
                        document.getElementById("margin").innerHTML= states[d].RepCand+" +"+Math.abs(margin);
                        document.getElementById("margin").style.color= "#ff352c"; 
                 }
             
    }


function drawStates(){ //draw the expected makeup of the Senate.
        stateSort();

    for (x in states2) { 
        var index2 = states.findIndex(st => st.State === states2[x].State);
        document.getElementById("up").innerHTML+="<div id='block' style='background-color:"+color(states2[x].DemProb)+";' onmouseover='Georgia("+index2+")' onmouseout='hideInfo()'><span></span></div>";
if(x==14){
    document.getElementById("up").innerHTML+="<div id='maj'></div>";
        }
    }
}    
function colorT(d){ //use this to color the states based on prob.
    if(d<=.05){
        return '#ff352c';
    } 
    if(d<=.25){
        return '#ff8d77';
    } 
        if(d<=.40){
    return '#ffc9bb';
        }  
        if(d<=.60){
    return '#fcfcfc';
}
        if(d<=.75){
    return '#accbfa';
}  
    
        if(d<=.95){
    return '#7bb2f7';
}  
        if(d<=1){
    return '#1e9af3';
} 
}
    function rating(d){ //use this to color the states based on prob.
    if(d<=.05){
        return 'Solid R';
    } 
   else if(d<=.25){
        return 'Likely R';
    } 
        if(d<=.40){
    return 'Lean R';
        }  
        if(d<=.60){
    return 'Tossup';
}
        if(d<=.75){
    return 'Lean D';
}      
        if(d<=.95){
    return 'Likely D';
}  
        if(d<=1){
    return 'Solid D';
}  
}
    
function color(d){ //use this to color the states based on prob.
    if(d<=.1){
        return '#ff352c';
    } 
    if(d<=.2){
        return '#ff715b';
    } 
        if(d<=.30){
    return '#ff9a85';
        }  
                if(d<=.40){
    return '#ffbeae';
}
            if(d<=.50){
    return '#ffdfd6';
}
        if(d<=.60){
    return '#deeafd';
}
        if(d<=.70){
    return '#bcd5fb';
}   
        if(d<=.80){
    return '#97c1f9';
}
        if(d<=.90){
    return '#6badf6';
}  
        if(d<=1){
    return '#1e9af3';
}  
}
    
function colorS(d){
        if(d>.4&&d<.6){
        return '2px solid black';
    }else{}
}
    
    function tossup(d){
        if(d<.6 && d>.40){
            return '#000';
        }
    }
 function tossupLine(d){ 
        if(d<.6 && d>.40){
            return '2';
        }else{
            return '0';
        }
    }

</script>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@700&display=swap');

    body{
        font-family: HelveticaNeue,Arial,sans-serif;
        font-weight: bold;
        background-color: whitesmoke;
    }
    #container{
        padding:30px;
    }
    #bar{
        width: 100%;
        height:30px;
        float:left;
        display: inline-block;
    }
    #bar2{
        width: 100%;
        height:15px;
    }
    #toplineD,#toplineR{
        font-size: 25pt;
    }
    #demProb{
width:61.73%;
        height: 100%;
        background-color: #2e9af3;
        float:left;
    }
     #tieProb{
width:10.55%;
        height: 100%;
        background-color: #8b8b8b;
         background: repeating-linear-gradient(
  45deg,
  #525252,
  #525252 5px,
  #f5f5f5 5px,
  #f5f5f5 10px
);
    float:left;
    }
         #repProb{
width:27.72%;
        height: 100%;
        background-color: #ff352c;
                 float:left;
    }
    #info{
        margin-bottom: 35px;
    }

    #map{
        display: inline-block;
        position: relative;
    }
    #lower{
      width:100%;  
        display: inline-block;
        border-top:3px solid;
    }
    .dem{
        float:left;
        color: #2e9af3;
        font-size:20pt;
    }
    .gop{
        float:right;
        color: #ff352c;
        font-size:20pt;
        text-align: right;
    }
    
    .meter{
    height: 100%;
    display: block;
    }
    #infobox{
        border:3px solid #292929;
        background-color: rgba(255, 255, 255, 0.95);
        text-align: left;
        width:200px;
        padding: 10px;
        z-index: 1;
    }
    #info-container{
        width:225px;
        height:150px;
        position: absolute;
   }
    #state{
        font-size: 15pt;
    }
    #notupD{
        background-color: #2e9af3;
    float:left;
    }
    hr{
        border: 1px solid #292929;
    }
  
     #notupR{
        background-color: #ff352c;
        width:100%;
        float: right;
    }
    #topline{
        display: inline-block;
        border-bottom: 3px solid #292929;
        padding-bottom: 45px;
        width:100%;    
    }
    #key,#dist{
        border-collapse: collapse;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
    font-size: 8pt;
    }
    td{
        padding:7px;
        border:1px solid whitesmoke;
        color:black;
    }
    #GA{
        height:20px;
        width:20px;
        background-color: #e0e0e0;
        padding:15px;
        color:#292929;
        position: relative;
        left:80%;
        top:-175px;
        font-size: 11pt;
        text-align: center;
    }
    #GA:hover{
        outline:3px solid #292929;
    }
    #map-display{
        width:100%;
        height:500px;
        overflow:hidden;
        text-align: center;
        padding-top:25px;   
        background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAHElEQVQYV2NkQAOMMP6uXbv+u7m5McIFYBIYAgCfogQFw8lF4AAAAABJRU5ErkJggg==)repeat;
    }
    #block{
        height:30px;
        width:.9%;
        outline:1px solid whitesmoke;
        background-color: #e0e0e0;
        padding:0px;
        color:#292929;
        float:left;
        text-align: center;
        font-size:9pt;
        cursor:crosshair;
    }
     #maj{
        height:30px;
        background-color:none;
        outline:1px solid black;
        color:#292929;
        float:left;
        text-align: center;
        font-size:9pt;
         margin:1px;
         opacity: .9;
    }
    #block:hover{
        outline:3px solid #292929;
        opacity: .9;
    }
    #distBar{
        height:25px;
        background-color: gray;
    }
    #dist td{
        border-right:2px solid gray;

    }
    #dist td:nth-child(3){
    }
        #dist td:nth-child(4){
padding:0px;
border-bottom: 1px solid gray;
    }
    #dist th{
        border-bottom: 2px solid gray;
    }
    #rater{
        font-size:9pt;
        text-align: center;
    width: 100%;
        border-collapse: collapse;
        font-weight: bold;
        border:0;
    }
    #rater td{
        padding:2px;
    }
    #current{
              border: 3px solid rgba(0, 0, 0, 0);  
    }

</style>